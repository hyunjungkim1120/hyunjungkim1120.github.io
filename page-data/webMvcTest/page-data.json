{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/webMvcTest",
    "result": {"data":{"markdownRemark":{"id":"0578b566-ed2b-5398-be36-80c2073635bb","html":"</br>\n<h2>ğŸ“‹ Controller í…ŒìŠ¤íŠ¸ ì‘ì„±</h2>\n<p>@WebMvcTest - MVCë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° ì‚¬ìš©</p>\n<blockquote>\n<p><code class=\"language-text\">@WebMvcTest</code>Spring MVC ì¸í”„ë¼ë¥¼ ìë™ êµ¬ì„±í•˜ê³  ìŠ¤ìº”ëœ ë¹ˆì„ <code class=\"language-text\">@Controller</code>, <code class=\"language-text\">@ControllerAdvice</code>, <code class=\"language-text\">@JsonComponent</code>, <code class=\"language-text\">Converter</code>, <code class=\"language-text\">GenericConverter</code>, <code class=\"language-text\">Filter</code>, <code class=\"language-text\">HandlerInterceptor</code>, <code class=\"language-text\">WebMvcConfigurer</code>, <code class=\"language-text\">WebMvcRegistrations</code>ë° <code class=\"language-text\">HandlerMethodArgumentResolver</code>. ì¼ë°˜ <code class=\"language-text\">@Component</code>ë° ë¹ˆì€ ì£¼ì„ì´ ì‚¬ìš©ë  <code class=\"language-text\">@ConfigurationProperties</code>ë•Œ ìŠ¤ìº”ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤ . </p>\n<p>ì°¸ê³  : <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing\">https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing</a></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebMvcTest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DMakerController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DMakerControllerTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">MockMvc</span> mockMvc<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token annotation punctuation\">@MockBean</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">DMakerService</span> dMakerService<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Mediatype</span> contentType <span class=\"token operator\">=</span> \n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                     <span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON<span class=\"token punctuation\">.</span><span class=\"token function\">getSubtype</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                     <span class=\"token class-name\">StandardCharsets</span><span class=\"token punctuation\">.</span>UTF_8<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">getAllDevelopers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">DeveloperDto</span> juniorDeveloperDto <span class=\"token operator\">=</span> <span class=\"token class-name\">DeveloperDto</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">developerSkillType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperSkillType</span><span class=\"token punctuation\">.</span>BACK_END<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">developerLevel</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperLevel</span><span class=\"token punctuation\">.</span>JUNIOR<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">memberId</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberId\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">DeveloperDto</span> seniorDeveloperDto <span class=\"token operator\">=</span> <span class=\"token class-name\">DeveloperDto</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">developerSkillType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperSkillType</span><span class=\"token punctuation\">.</span>FRONT_END<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">developerLevel</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperLevel</span><span class=\"token punctuation\">.</span>SENIOR<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">memberId</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberId\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">given</span><span class=\"token punctuation\">(</span>dMakerService<span class=\"token punctuation\">.</span><span class=\"token function\">getAllEmployedDevelopers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">willReturn</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span>juniorDeveloperDto<span class=\"token punctuation\">,</span> seniorDeveloperDto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        \n        mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/developers\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">contentType</span><span class=\"token punctuation\">(</span>contentType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isOk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">andDo</span><span class=\"token punctuation\">(</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span>\n            \t<span class=\"token function\">jsonPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.[0].developerSkillType\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperSkillType</span><span class=\"token punctuation\">.</span>BACK_END<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span>\n            \t<span class=\"token function\">jsonPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.[0].developerSkillType\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperLevel</span><span class=\"token punctuation\">.</span>JUNIOR<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span>\n            \t<span class=\"token function\">jsonPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.[1].developerSkillType\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperSkillType</span><span class=\"token punctuation\">.</span>FRONT_END<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span>\n            \t<span class=\"token function\">jsonPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.[1].developerSkillType\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token function\">is</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeveloperLevel</span><span class=\"token punctuation\">.</span>SENIOR<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</br>\n</br>\n<h5>í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ ë³´ë‹¤ê°€ ë§Œë‚œ .IllegalArtumentException : JPA metamodel must not be empty! ì—ëŸ¬!</h5>\n<p>-> ì•„ë˜ SpringBootApplicationì—ì„œ EnableJpaAuditingë¥¼ í†µí•´ Auditigì„ í™œì„±í™”í•´ì£¼ê³  BaseEntity<em>(abstract class)</em>ë¥¼ ë§Œë“¤ì–´ì„œ ê° í…Œì´ë¸”ì— ì¤‘ë³µë˜ëŠ” í•„ë“œë“¤ (ìˆ˜ì •ì, ìˆ˜ì •ì‹œê°„ ë“±)ì„ ë§Œë“¤ì–´ ê° EntityëŠ” BaseEntityë¥¼ ìƒì† ë°›ì•„ ì‚¬ìš©í–ˆì—ˆëŠ”ë°,</p>\n<p>ì´ì™€ê°™ì´ Entityë“¤ì˜ ìƒì„± ë° ìˆ˜ì • LocalDateTimeì„ ìë™ìœ¼ë¡œ ê´€ë¦¬í•´ì£¼ëŠ” Auditing ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ @EnableJpaAuditingë¥¼ @SpringBootApplicationì— ë“±ë¡í•´ë†“ì€ ê²ƒì´ ì—ëŸ¬ì˜ ì›ì¸ì´ì˜€ë‹¤.</p>\n<p>@EnableJpaAuditing ë•Œë¬¸ì— ëª¨ë“  í…ŒìŠ¤íŠ¸ë“¤ì´ í•­ìƒ JPA ê´€ë ¨ Beanë“¤ì„ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸.</p>\n</br>\n<h5>ğŸ’¡ í•´ê²°ë°©ë²•</h5>\n<ol>\n<li>\n<p><strong>Configuration ë¶„ë¦¬</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//ê¸°ì¡´</span>\n<span class=\"token annotation punctuation\">@EnableJpaAuditing</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DmakerApplication</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyblogApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//ë³€ê²½í›„</span>\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableJpaAuditing</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaConfiguration</span> <span class=\"token punctuation\">{</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DmakerApplication</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyblogApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><strong>MockBean ì¶”ê°€</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@WebMvcTest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DMakerController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@MockBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JpaMetamodelMappingContext</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ol>\n</br>\n<p>ì´ì™€ ê°™ì´ @WebMvcTestë¥¼ í†µí•´ Controller í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë©´ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ì–´ë ¤ìš´ í…ŒìŠ¤íŠ¸(exí…ŒìŠ¤íŠ¸ë¡œ í˜¸ì¶œí•´ë³´ê¸° ìš°ë ¤ìš´ API) ì—ì„œë„ Mockì„ í†µí•´ ê°€ì§œ ê°ì²´ë¡œ í…ŒìŠ¤íŠ¸ë„ ê°€ëŠ¥í•˜ê³  WebApplication ê´€ë ¨ëœ Beanë“¤ë§Œ ë“±ë¡í•˜ê¸° ë•Œë¬¸ì— í†µí•© í…ŒìŠ¤íŠ¸ë³´ë‹¤ ë¹ ë¥´ë‹¤ëŠ” ì¥ì ë„ ìˆì§€ë§Œ</p>\n<p>Mockê¸°ë°˜ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ì‹¤ì œ í™˜ê²½ì—ì„œ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ë„ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.</p>\n</br>\n</br>\n<h2>ì°¸ê³ ìë£Œ</h2>\n<ul>\n<li><a href=\"https://goddaehee.tistory.com/212\">ê°“ëŒ€í¬ì˜ ì‘ì€ê³µê°„</a></li>\n<li><a href=\"https://xlffm3.github.io/spring%20&#x26;%20spring%20boot/JPAError/\">Spring Boot í…ŒìŠ¤íŠ¸ ì—ëŸ¬ : JPA metamodel must not be empty!</a></li>\n</ul>","excerpt":"ğŸ“‹ Controller í…ŒìŠ¤íŠ¸ ì‘ì„± @WebMvcTest - MVCë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° ì‚¬ìš© Spring MVCâ€¦","frontmatter":{"date":"March 28, 2022","slug":"/webMvcTest","title":"Controller í…ŒìŠ¤íŠ¸ @WebMvcTest","description":"Controller í…ŒìŠ¤íŠ¸ @WebMvcTest ë° JPA metamodel must not be empty! ì—ëŸ¬ í•´ê²°ê¸°ë¡","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/9cf5dd5c1ba818075caa365103cec0b8/4a49b/webMvcTest.jpg","srcSet":"/static/9cf5dd5c1ba818075caa365103cec0b8/37bba/webMvcTest.jpg 750w,\n/static/9cf5dd5c1ba818075caa365103cec0b8/61c72/webMvcTest.jpg 1080w,\n/static/9cf5dd5c1ba818075caa365103cec0b8/4a49b/webMvcTest.jpg 1280w","sizes":"100vw"},"sources":[{"srcSet":"/static/9cf5dd5c1ba818075caa365103cec0b8/a66aa/webMvcTest.webp 750w,\n/static/9cf5dd5c1ba818075caa365103cec0b8/65dd5/webMvcTest.webp 1080w,\n/static/9cf5dd5c1ba818075caa365103cec0b8/71d4d/webMvcTest.webp 1280w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5625}}}}}},"pageContext":{"id":"0578b566-ed2b-5398-be36-80c2073635bb","previous":{"id":"f52c18f8-b623-51d4-afef-0d6866a7df6e","frontmatter":{"slug":"/ExtendWith","template":"blog-post","title":"Service í…ŒìŠ¤íŠ¸ @ExtendWith"}},"next":{"id":"d7e42c1d-7c16-5ed8-b85c-454bc265931a","frontmatter":{"slug":"/","template":"index-page","title":"Moongkim ê°œë°œì¼ì§€"}}}},
    "staticQueryHashes": ["228695001","2744905544","358227665"]}